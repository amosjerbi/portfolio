
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Gallery</title>
    <style>
        .gallery { display: flex; flex-wrap: wrap; gap: 10px; }
        .gallery img { width: 200px; height: auto; }
    </style>
</head>
<body>
    <h1>Instagram Gallery</h1>
    <div class="gallery" id="gallery"></div>
   <!-- Add this script to load Instagram posts -->
<script>
  async function loadInstagramPosts() {
    const gallery = document.getElementById('gallery');
    gallery.innerHTML = '<div class="loading">Loading posts...</div>';

    try {
      // Load the JSON file generated by the GitHub Actions workflow
      const response = await fetch('assets/data/instagram-posts.json');
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();
      gallery.innerHTML = '';

      if (!data.data || data.data.length === 0) {
        gallery.innerHTML = '<div class="error">No posts found</div>';
        return;
      }

      const posts = data.data.filter(post =>
        post.media_type === 'IMAGE' || post.media_type === 'CAROUSEL_ALBUM'
      );

      posts.forEach((post, index) => {
        const div = document.createElement('div');
        div.className = 'flow';

        const img = document.createElement('img');
        img.className = 'img';
        img.src = post.media_url;
        img.alt = post.caption || 'Instagram post';
        img.loading = 'lazy';

        div.addEventListener('click', () => {
          const modal = document.getElementById('modal');
          modal.style.display = 'block';
          showPost(index);
        });

        div.appendChild(img);
        gallery.appendChild(div);
      });
    } catch (error) {
      console.error('Error loading Instagram posts:', error);
      gallery.innerHTML = '<div class="error">Error loading posts. Please try again later.</div>';
    }
  }

  // Call the function when the page loads
  document.addEventListener('DOMContentLoaded', loadInstagramPosts);
</script>
</body>
</html>
